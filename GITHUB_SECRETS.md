# üîê GitHub Secrets –¥–ª—è –¥–µ–ø–ª–æ—è

–î–ª—è —Ä–∞–±–æ—Ç—ã GitHub Actions –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

## üìç –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Settings**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Secrets and variables** ‚Üí **Actions**
4. –ù–∞–∂–º–∏—Ç–µ **New repository secret**

## üîë –°–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤

### üåê –°–µ—Ä–≤–µ—Ä

| –°–µ–∫—Ä–µ—Ç           | –û–ø–∏—Å–∞–Ω–∏–µ                   | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è                          |
| ---------------- | -------------------------- | ---------------------------------------- |
| `SERVER_HOST`    | IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞ | `138.68.124.16`                          |
| `SERVER_USER`    | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH       | `root`                                   |
| `SERVER_SSH_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á         | `-----BEGIN OPENSSH PRIVATE KEY-----...` |
| `SERVER_PORT`    | SSH –ø–æ—Ä—Ç (–æ–±—ã—á–Ω–æ 22)       | `22`                                     |

### üè∑Ô∏è –î–æ–º–µ–Ω

| –°–µ–∫—Ä–µ—Ç   | –û–ø–∏—Å–∞–Ω–∏–µ         | –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è  |
| -------- | ---------------- | ---------------- |
| `DOMAIN` | –î–æ–º–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `food.nitive.me` |

### üîê Google OAuth

| –°–µ–∫—Ä–µ—Ç                 | –û–ø–∏—Å–∞–Ω–∏–µ                   | –ì–¥–µ –≤–∑—è—Ç—å                                                                 |
| ---------------------- | -------------------------- | ------------------------------------------------------------------------- |
| `GOOGLE_CLIENT_ID`     | Google OAuth Client ID     | [Google Cloud Console](https://console.cloud.google.com/apis/credentials) |
| `GOOGLE_CLIENT_SECRET` | Google OAuth Client Secret | [Google Cloud Console](https://console.cloud.google.com/apis/credentials) |

### üîí JWT

| –°–µ–∫—Ä–µ—Ç       | –û–ø–∏—Å–∞–Ω–∏–µ                       | –ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å         |
| ------------ | ------------------------------ | ------------------------- |
| `JWT_SECRET` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤ | `openssl rand -base64 32` |

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–∞

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SSH –∫–ª—é—á (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
ssh-keygen -t ed25519 -C "github-actions@food-app"

# –ö–æ–ø–∏—Ä—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -i ~/.ssh/id_ed25519.pub root@138.68.124.16

# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è GitHub
cat ~/.ssh/id_ed25519
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google OAuth

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í–∫–ª—é—á–∏—Ç–µ Google+ API
4. –°–æ–∑–¥–∞–π—Ç–µ OAuth 2.0 credentials
5. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω `food.nitive.me` –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Å–µ–∫—Ä–µ—Ç–∞

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ–∫—Ä–µ—Ç
openssl rand -base64 32
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
2. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥—ã–π —Å–µ–∫—Ä–µ—Ç:

```
SERVER_HOST = 138.68.124.16
SERVER_USER = root
SERVER_SSH_KEY = -----BEGIN OPENSSH PRIVATE KEY-----
                 –≤–∞—à_–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á
                 -----END OPENSSH PRIVATE KEY-----
SERVER_PORT = 22
DOMAIN = food.nitive.me
GOOGLE_CLIENT_ID = –≤–∞—à_google_client_id
GOOGLE_CLIENT_SECRET = –≤–∞—à_google_client_secret
JWT_SECRET = –≤–∞—à_—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç
```

## üöÄ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** - –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ –≤–µ—Ç–∫—É `main`
2. **–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π** - –≤ Actions ‚Üí Deploy to Production ‚Üí Run workflow

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:

- **HTTPS**: https://food.nitive.me
- **HTTP**: http://138.68.124.16 (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ HTTPS)

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSH

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh -i ~/.ssh/id_ed25519 root@138.68.124.16

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∫–ª—é—á
chmod 600 ~/.ssh/id_ed25519
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Google OAuth

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ credentials –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ–º–µ–Ω–æ–º

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 24 —á–∞—Å–æ–≤)

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ GitHub Actions
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `ssh root@138.68.124.16 'cd /opt/food-app && docker-compose logs'`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
